require "rake/clean"
require "bundler/gem_tasks"

require_relative "lib/tasks/mruby"
require_relative "lib/tasks/consolidate"
require_relative "lib/tasks/man"

task :default => %i[man spec build install mruby]

##-- Testing

require "rake/testtask"
desc 'Run the tests'
task :spec => :test
Rake::TestTask.new(:test) do |t|
  t.libs << "spec"
  t.libs << "lib"
  t.test_files = FileList["spec/**/*_spec.rb"]
  t.warning = false # suppress `circular require` from minitest
end

##-- Linting

require "rubocop/rake_task"
RuboCop::RakeTask.new :lint do |t|
  t.options = %w[--display-cop-names -c.rubocop.yml]
end
