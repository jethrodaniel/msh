---

# TODO: add `:msg:` key for failing examples

:examples:
  # words, filenames, options, etc

  "echo such wow":
    :valid: true
    :tokens: |
      ['[1:1-4][WORD, "echo"]',
       '[1:5-5][SPACE, " "]',
       '[1:6-9][WORD, "such"]',
       '[1:10-10][SPACE, " "]',
       '[1:11-13][WORD, "wow"]',
       '[1:14-14][EOF, "\\u0000"]']
    :ast: |
      s(:EXPR,
        s(:COMMAND,
          s(:WORD, "echo"),
          s(:WORD, "such"),
          s(:WORD, "wow")))

  "echo so scare":
    :valid: true
    :tokens: |
      ['[1:1-4][WORD, "echo"]',
       '[1:5-5][SPACE, " "]',
       '[1:6-7][WORD, "so"]',
       '[1:8-8][SPACE, " "]',
       '[1:9-13][WORD, "scare"]',
       '[1:14-14][EOF, "\\u0000"]']
    :ast: |
      s(:EXPR,
        s(:COMMAND,
          s(:WORD, "echo"),
          s(:WORD, "so"),
          s(:WORD, "scare")))

#  "/usr/bin/program\\ with\\ space \\but\\ this\\ is\\ an\\ arg":
#    :valid: false
#    :tokens: |
#      [[:WORD, "/usr/bin/program\\ with\\ space"],
#       [:WORD, "\\but\\ this\\ is\\ an\\ arg"]]
#    :ast: |
#      s(:EXPR,
#        s(:COMMAND,
#          s(:WORD, "/usr/bin/program\\ with\\ space"),
#          s(:WORD, "\\but\\ this\\ is\\ an\\ arg")))

#  "a&&b":
#    :valid: true
#    :tokens: |
#      ["[1:1-1][WORD, 'a']",
#       "[1:2-3][AND, '&&']",
#       "[1:4-4][WORD, 'b']",
#       "[1:5-5][EOF, '']"]
#    :ast: |

#  "echo a\\;b":
#    :valid: false
#    :tokens: |
#      [[:WORD, "a"],
#       [:WORD, "\\but\\ this\\ is\\ an\\ arg"]]
#    :ast: |
#      s(:EXPR,
#        s(:COMMAND,
#          s(:WORD, "/usr/bin/program\\ with\\ space"),
#          s(:WORD, "\\but\\ this\\ is\\ an\\ arg")))

#  "find . -name \"*.rb\" -exec sed -i 's/msh/yas/g' {} \\;)":
#    :tokens: |
#      [[:WORD, "find"],
#       [:WORD, "."],
#       [:WORD, "-name"],
#       [:DOUBLE_QUOTE_STR, "*.rb"],
#       [:WORD, "-exec"],
#       [:WORD, "sed"],
#       [:WORD, "-i"],
#       [:SINGLE_QUOTE_STR, "s/msh/yas/g"],
#       [:WORD, "{}"],
#       [:LITERAL, ";"]
#    :ast: |

#  "cd ..":
#    :valid: true
#    :tokens: |
#      ["[1:1-2][WORD, 'cd']",
#       "[1:4-5][WORD, '..']",
#       "[1:6-6][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:COMMAND,
#          s(:WORD, "cd"),
#          s(:WORD, "..")))

#  "...":
#    :valid: true
#    :tokens: |
#      ["[1:1-3][WORD, '...']",
#       "[1:4-4][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:COMMAND,
#          s(:WORD, "...")))

#  #
#  # pipes
#  #
#  "fortune | cowsay":
#    :valid: true
#    :tokens: |
#      ["[1:1-7][WORD, 'fortune']",
#       "[1:9-9][PIPE, '|']",
#       "[1:11-16][WORD, 'cowsay']",
#       "[1:17-17][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:PIPELINE,
#          s(:COMMAND,
#            s(:WORD, "fortune")),
#          s(:COMMAND,
#            s(:WORD, "cowsay"))))

#  # `|&` is sugar for `2>&1 |`

#  "fortune |& cowsay":
#    :valid: true
#    :tokens: |
#      ["[1:1-7][WORD, 'fortune']",
#       "[1:9-10][PIPE_AND, '|&']",
#       "[1:12-17][WORD, 'cowsay']",
#       "[1:18-18][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:PIPELINE,
#          s(:COMMAND,
#            s(:WORD, "fortune"),
#            s(:REDIRECTIONS,
#              s(:DUP, 2, 1))),
#          s(:COMMAND,
#            s(:WORD, "cowsay"))))

#  "fortune >out |& cowsay":
#    :valid: true
#    :tokens: |
#      ["[1:1-7][WORD, 'fortune']",
#       "[1:9-9][REDIRECT_OUT, '>']",
#       "[1:10-12][WORD, 'out']",
#       "[1:14-15][PIPE_AND, '|&']",
#       "[1:17-22][WORD, 'cowsay']",
#       "[1:23-23][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:PIPELINE,
#          s(:COMMAND,
#            s(:WORD, "fortune"),
#              s(:REDIRECTIONS,
#                s(:REDIRECT, 1, "out"),
#                s(:DUP, 2, 1))),
#          s(:COMMAND,
#            s(:WORD, "cowsay"))))

#  "fortune >out | wow |& cowsay":
#    :valid: true
#    :tokens: |
#      ["[1:1-7][WORD, 'fortune']",
#       "[1:9-9][REDIRECT_OUT, '>']",
#       "[1:10-12][WORD, 'out']",
#       "[1:14-14][PIPE, '|']",
#       "[1:16-18][WORD, 'wow']",
#       "[1:20-21][PIPE_AND, '|&']",
#       "[1:23-28][WORD, 'cowsay']",
#       "[1:29-29][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:PIPELINE,
#          s(:COMMAND,
#            s(:WORD, "fortune"),
#            s(:REDIRECTIONS,
#              s(:REDIRECT, 1, "out"))),
#          s(:COMMAND,
#            s(:WORD, "wow"),
#            s(:REDIRECTIONS,
#              s(:DUP, 2, 1))),
#          s(:COMMAND,
#            s(:WORD, "cowsay"))))

#  "fortune >out | wow |& cowsay | wow":
#    :valid: true
#    :tokens: |
#      ["[1:1-7][WORD, 'fortune']",
#       "[1:9-9][REDIRECT_OUT, '>']",
#       "[1:10-12][WORD, 'out']",
#       "[1:14-14][PIPE, '|']",
#       "[1:16-18][WORD, 'wow']",
#       "[1:20-21][PIPE_AND, '|&']",
#       "[1:23-28][WORD, 'cowsay']",
#       "[1:30-30][PIPE, '|']",
#       "[1:32-34][WORD, 'wow']",
#       "[1:35-35][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:PIPELINE,
#          s(:COMMAND,
#            s(:WORD, "fortune"),
#            s(:REDIRECTIONS,
#              s(:REDIRECT, 1, "out"))),
#          s(:COMMAND,
#            s(:WORD, "wow"),
#            s(:REDIRECTIONS,
#              s(:DUP, 2, 1))),
#          s(:COMMAND,
#            s(:WORD, "cowsay")),
#          s(:COMMAND,
#            s(:WORD, "wow"))))

#  "a >out | b <in >out |& c |& d":
#    :valid: true
#    :tokens: |
#      ["[1:1-1][WORD, 'a']",
#       "[1:3-3][REDIRECT_OUT, '>']",
#       "[1:4-6][WORD, 'out']",
#       "[1:8-8][PIPE, '|']",
#       "[1:10-10][WORD, 'b']",
#       "[1:12-12][REDIRECT_IN, '<']",
#       "[1:13-14][WORD, 'in']",
#       "[1:16-16][REDIRECT_OUT, '>']",
#       "[1:17-19][WORD, 'out']",
#       "[1:21-22][PIPE_AND, '|&']",
#       "[1:24-24][WORD, 'c']",
#       "[1:26-27][PIPE_AND, '|&']",
#       "[1:29-29][WORD, 'd']",
#       "[1:30-30][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:PIPELINE,
#          s(:COMMAND,
#            s(:WORD, "a"),
#            s(:REDIRECTIONS,
#              s(:REDIRECT, 1, "out"))),
#          s(:COMMAND,
#            s(:WORD, "b"),
#            s(:REDIRECTIONS,
#              s(:REDIRECT, 0, "in"),
#              s(:REDIRECT, 1, "out"),
#              s(:DUP, 2, 1))),
#          s(:COMMAND,
#            s(:WORD, "c"),
#            s(:REDIRECTIONS,
#              s(:DUP, 2, 1))),
#          s(:COMMAND,
#            s(:WORD, "d"))))

#  "! fortune | cowsay":
#    :valid: true
#    :tokens: |
#      ["[1:1-1][BANG, '!']",
#       "[1:3-9][WORD, 'fortune']",
#       "[1:11-11][PIPE, '|']",
#       "[1:13-18][WORD, 'cowsay']",
#       "[1:19-19][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:NEG_PIPELINE,
#          s(:COMMAND,
#            s(:WORD, "fortune")),
#          s(:COMMAND,
#            s(:WORD, "cowsay"))))

#  "time echo":
#    :valid: true
#    :tokens: |
#      ["[1:1-4][TIME, 'time']",
#       "[1:6-9][WORD, 'echo']",
#       "[1:10-10][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:PIPELINE,
#          s(:TIME),
#          s(:WORD, "echo")))

#  "time -p echo":
#    :valid: false
#    :tokens: |
#      [[:TIME, "time"],
#       [:TIME_OPT, "-p"],
#       [:WORD, "echo"]]
#    :ast: |
#      s(:EXPR,
#        s(:PIPELINE,
#          s(:TIME_P),
#          s(:WORD, "echo")))

#  "echo time":
#    :valid: true
#    :tokens: |
#      ["[1:1-4][WORD, 'echo']",
#       "[1:6-9][TIME, 'time']",
#       "[1:10-10][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:COMMAND,
#         s(:WORD, "echo"),
#         s(:WORD, "time")))

#  "time ! fortune | cowsay":
#    :valid: true
#    :tokens: |
#      ["[1:1-4][TIME, 'time']",
#       "[1:6-6][BANG, '!']",
#       "[1:8-14][WORD, 'fortune']",
#       "[1:16-16][PIPE, '|']",
#       "[1:18-23][WORD, 'cowsay']",
#       "[1:24-24][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:NEG_PIPELINE,
#          s(:TIME),
#          s(:COMMAND,
#            s(:WORD, "fortune")),
#          s(:COMMAND,
#            s(:WORD, "cowsay"))))

#  "time -p ! fortune | cowsay":
#    :valid: false
#    :tokens: |
#      [[:TIME, "time"],
#       [:TIME_OPT, "-p"],
#       [:BANG, "!"],
#       [:WORD, "fortune"],
#       [:PIPE, "|"],
#       [:WORD, "cowsay"]]
#    :ast: |
#      s(:EXPR,
#        s(:NEG_PIPELINE,
#          s(:TIME_P),
#          s(:COMMAND,
#            s(:WORD, "fortune")),
#          s(:COMMAND,
#            s(:WORD, "cowsay"))))

#  "a | b | c":
#   :valid: true
#   :tokens: |
#     ["[1:1-1][WORD, 'a']",
#      "[1:3-3][PIPE, '|']",
#      "[1:5-5][WORD, 'b']",
#      "[1:7-7][PIPE, '|']",
#      "[1:9-9][WORD, 'c']",
#      "[1:10-10][EOF, '']"]
#   :ast: |
#     s(:EXPR,
#       s(:PIPELINE,
#         s(:COMMAND,
#           s(:WORD, "a")),
#         s(:COMMAND,
#           s(:WORD, "b")),
#         s(:COMMAND,
#           s(:WORD, "c"))))

#  #
#  # conditionals
#  #

#  "a || b":
#    :valid: true
#    :tokens: |
#      ["[1:1-1][WORD, 'a']",
#       "[1:3-4][OR, '||']",
#       "[1:6-6][WORD, 'b']",
#       "[1:7-7][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:OR,
#          s(:COMMAND,
#            s(:WORD, "a")),
#          s(:COMMAND,
#            s(:WORD, "b"))))

#  "a && b":
#    :valid: true
#    :tokens: |
#      ["[1:1-1][WORD, 'a']",
#       "[1:3-4][AND, '&&']",
#       "[1:6-6][WORD, 'b']",
#       "[1:7-7][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:AND,
#          s(:COMMAND,
#            s(:WORD, "a")),
#          s(:COMMAND,
#            s(:WORD, "b"))))

#  #
#  # precedence
#  #

#  "date && date | cowsay":
#    :valid: true
#    :tokens: |
#      ["[1:1-4][WORD, 'date']",
#       "[1:6-7][AND, '&&']",
#       "[1:9-12][WORD, 'date']",
#       "[1:14-14][PIPE, '|']",
#       "[1:16-21][WORD, 'cowsay']",
#       "[1:22-22][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:AND,
#          s(:COMMAND,
#            s(:WORD, "date")),
#          s(:PIPELINE,
#            s(:COMMAND,
#              s(:WORD, "date")),
#            s(:COMMAND,
#              s(:WORD, "cowsay")))))

#  #
#  # groups
#  #

#  "{a}":
#   :valid: true
#   :tokens: |
#     ["[1:1-1][LEFT_BRACE, '{']",
#      "[1:2-2][WORD, 'a']",
#      "[1:3-3][RIGHT_BRACE, '}']",
#      "[1:4-4][EOF, '']"]
#   :ast: |
#     s(:EXPR,
#       s(:GROUP,
#         s(:COMMAND,
#           s(:WORD, "a"))))

#  "{a;b}>out|c":
#    :valid: true
#    :tokens: |
#      ["[1:1-1][LEFT_BRACE, '{']",
#       "[1:2-2][WORD, 'a']",
#       "[1:3-3][SEMI, ';']",
#       "[1:4-4][WORD, 'b']",
#       "[1:5-5][RIGHT_BRACE, '}']",
#       "[1:6-6][REDIRECT_OUT, '>']",
#       "[1:7-9][WORD, 'out']",
#       "[1:10-10][PIPE, '|']",
#       "[1:11-11][WORD, 'c']",
#       "[1:12-12][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:PIPELINE,
#          s(:GROUP,
#            s(:LIST,
#              s(:COMMAND,
#                s(:WORD, "a")),
#              s(:COMMAND,
#                s(:WORD, "b"))),
#            s(:REDIRECTIONS,
#              s(:REDIRECT, 1, "out"))),
#          s(:COMMAND,
#            s(:WORD, "c"))))

#  #
#  # subshells
#  #

#  "(a)":
#   :valid: true
#   :tokens: |
#     ["[1:1-1][LEFT_PAREN, '(']",
#      "[1:2-2][WORD, 'a']",
#      "[1:3-3][RIGHT_PAREN, ')']",
#      "[1:4-4][EOF, '']"]
#   :ast: |
#     s(:EXPR,
#       s(:SUBSHELL,
#         s(:COMMAND,
#           s(:WORD, "a"))))

#  "(a;b)>out|c":
#    :valid: true
#    :tokens: |
#      ["[1:1-1][LEFT_PAREN, '(']",
#       "[1:2-2][WORD, 'a']",
#       "[1:3-3][SEMI, ';']",
#       "[1:4-4][WORD, 'b']",
#       "[1:5-5][RIGHT_PAREN, ')']",
#       "[1:6-6][REDIRECT_OUT, '>']",
#       "[1:7-9][WORD, 'out']",
#       "[1:10-10][PIPE, '|']",
#       "[1:11-11][WORD, 'c']",
#       "[1:12-12][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:PIPELINE,
#          s(:SUBSHELL,
#            s(:LIST,
#              s(:COMMAND,
#                s(:WORD, "a")),
#              s(:COMMAND,
#                s(:WORD, "b"))),
#            s(:REDIRECTIONS,
#              s(:REDIRECT, 1, "out"))),
#          s(:COMMAND,
#            s(:WORD, "c"))))

#  "{a}|(b)>out&&c||d>t;a;{b;c}>wow":
#    :valid: true
#    :tokens: |
#      ["[1:1-1][LEFT_BRACE, '{']",
#       "[1:2-2][WORD, 'a']",
#       "[1:3-3][RIGHT_BRACE, '}']",
#       "[1:4-4][PIPE, '|']",
#       "[1:5-5][LEFT_PAREN, '(']",
#       "[1:6-6][WORD, 'b']",
#       "[1:7-7][RIGHT_PAREN, ')']",
#       "[1:8-8][REDIRECT_OUT, '>']",
#       "[1:9-11][WORD, 'out']",
#       "[1:12-13][AND, '&&']",
#       "[1:14-14][WORD, 'c']",
#       "[1:15-16][OR, '||']",
#       "[1:17-17][WORD, 'd']",
#       "[1:18-18][REDIRECT_OUT, '>']",
#       "[1:19-21][WORD, 't;a']",
#       "[1:22-22][SEMI, ';']",
#       "[1:23-23][LEFT_BRACE, '{']",
#       "[1:24-24][WORD, 'b']",
#       "[1:25-25][SEMI, ';']",
#       "[1:26-26][WORD, 'c']",
#       "[1:27-27][RIGHT_BRACE, '}']",
#       "[1:28-28][REDIRECT_OUT, '>']",
#       "[1:29-31][WORD, 'wow']",
#       "[1:32-32][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:LIST,
#          s(:AND,
#            s(:PIPELINE,
#              s(:GROUP,
#                s(:COMMAND,
#                  s(:WORD, "a"))),
#              s(:SUBSHELL,
#                s(:COMMAND,
#                  s(:WORD, "b")),
#                s(:REDIRECTIONS,
#                  s(:REDIRECT, 1, "out")))),
#            s(:OR,
#              s(:COMMAND,
#                s(:WORD, "c")),
#              s(:COMMAND,
#                s(:WORD, "d"),
#                s(:REDIRECTIONS,
#                  s(:REDIRECT, 1, "t"))))),
#          s(:COMMAND,
#            s(:WORD, "a")),
#          s(:GROUP,
#            s(:LIST,
#              s(:COMMAND,
#                s(:WORD, "b")),
#              s(:COMMAND,
#                s(:WORD, "c"))),
#            s(:REDIRECTIONS,
#              s(:REDIRECT, 1, "wow")))))

#  "{a || b}":
#   :valid: true
#   :tokens: |
#     ["[1:1-1][LEFT_BRACE, '{']",
#      "[1:2-2][WORD, 'a']",
#      "[1:4-5][OR, '||']",
#      "[1:7-7][WORD, 'b']",
#      "[1:8-8][RIGHT_BRACE, '}']",
#      "[1:9-9][EOF, '']"]
#   :ast: |
#     s(:EXPR,
#       s(:GROUP,
#         s(:COMMAND,
#           s(:WORD, "a"))))

#  #
#  # subshells
#  #

#  "(a)":
#    :valid: true
#    :tokens: |
#      ["[1:1-1][LEFT_PAREN, '(']",
#       "[1:2-2][WORD, 'a']",
#       "[1:3-3][RIGHT_PAREN, ')']",
#       "[1:4-4][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:SUBSHELL,
#          s(:COMMAND,
#            s(:WORD, "a"))))

#  #
#  # redirections
#  #

#  "2>out 1 4>out":
#    :valid: false
#    :tokens: |
#      ["[1:1-2][REDIRECT_OUT, '2>']",
#       "[1:3-5][WORD, 'out']",
#       "[1:7-7][WORD, '1']",
#       "[1:9-10][REDIRECT_OUT, '4>']",
#       "[1:11-13][WORD, 'out']",
#       "[1:14-14][EOF, '']"]
#    :ast: |

#  "ls a <in 1<in >out 2>out >>foo >|wow 3>|ouch &>un &>>mas 4<&1 <&4 >&5 2>&1 13>&2- 6<>foo":
#   :valid: true
#   :tokens: |
#     ["[1:1-2][WORD, 'ls']",
#      "[1:4-4][WORD, 'a']",
#      "[1:6-6][REDIRECT_IN, '<']",
#      "[1:7-8][WORD, 'in']",
#      "[1:10-12][REDIRECT_IN, '1<i']",
#      "[1:13-13][WORD, 'n']",
#      "[1:15-15][REDIRECT_OUT, '>']",
#      "[1:16-18][WORD, 'out']",
#      "[1:20-21][REDIRECT_OUT, '2>']",
#      "[1:22-24][WORD, 'out']",
#      "[1:26-27][APPEND_OUT, '>>']",
#      "[1:28-30][WORD, 'foo']",
#      "[1:32-33][NO_CLOBBER, '>|']",
#      "[1:34-36][WORD, 'wow']",
#      "[1:38-40][NO_CLOBBER, '3>|']",
#      "[1:41-44][WORD, 'ouch']",
#      "[1:46-47][AND_REDIRECT_RIGHT, '&>']",
#      "[1:48-49][WORD, 'un']",
#      "[1:51-53][AND_D_REDIRECT_RIGHT, '&>>']",
#      "[1:54-56][WORD, 'mas']",
#      "[1:58-67][REDIRECT_OUT, '4<&1 <&4 >']",
#      "[1:68-69][BG, '&5']",
#      "[1:71-72][REDIRECT_OUT, '2>']",
#      "[1:73-74][BG, '&1']",
#      "[1:76-78][REDIRECT_OUT, '13>']",
#      "[1:79-80][BG, '&2']",
#      "[1:81-81][WORD, '-']",
#      "[1:83-85][OPEN_RW, '6<>']",
#      "[1:86-88][WORD, 'foo']",
#      "[1:89-89][EOF, '']"]
#   :ast: |
#     s(:EXPR,
#       s(:COMMAND,
#         s(:WORD, "ls"),
#         s(:WORD, "a"),
#         s(:REDIRECTIONS,
#           s(:REDIRECT, 0, "in"),
#           s(:REDIRECT, 1, "in"),
#           s(:REDIRECT, 1, "out"),
#           s(:REDIRECT, 2, "out"),
#           s(:APPEND, 1, "foo"),
#           s(:REDIRECT_NOCLOBBER, 1, "wow"),
#           s(:REDIRECT, 3, "ouch"),
#           s(:REDIRECT_BOTH, "un"),
#           s(:APPEND_BOTH, "mas"),
#           s(:DUP, 4, 1),
#           s(:DUP, 0, 4),
#           s(:REDIRECT_BOTH, "5"),
#           s(:DUP, 2, 1),
#           s(:MOVE_FD, 13, 2),
#           s(:OPEN_RW, 6, "foo"))))

#  # comments

#  "#":
#    :valid: true
#    :tokens: |
#      ["[1:2-2][EOF, '']"]
#    :ast: |
#      s(:NOOP)

#  "#x":
#    :valid: true
#    :tokens: |
#      ["[1:3-3][EOF, '']"]
#    :ast: |
#      s(:NOOP)

#  "# look! # a comment!\n\n\n\n":
#    :valid: true
#    :tokens: |
#      ["[5:1-1][EOF, '']"]
#    :ast: |
#      s(:NOOP)

#  "fortune # comments continue until one or more newlines":
#    :valid: true
#    :tokens: |
#      ["[1:1-7][WORD, 'fortune']",
#       "[1:55-55][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:COMMAND,
#          s(:WORD, "fortune")))

#  # job control

#  "a &":
#    :valid: true
#    :tokens: |
#      ["[1:1-1][WORD, 'a']",
#       "[1:3-3][BG, '&']",
#       "[1:4-4][EOF, '']"]
#    :ast: |

#  "ls|wow 3>doggo 2>&1 >/dev/null;wow&&wow||o>out&&goose|&duck":
#    :valid: true
#    :tokens: |
#      ["[1:1-2][WORD, 'ls']",
#       "[1:3-3][PIPE, '|']",
#       "[1:4-6][WORD, 'wow']",
#       "[1:8-9][REDIRECT_OUT, '3>']",
#       "[1:10-14][WORD, 'doggo']",
#       "[1:16-17][REDIRECT_OUT, '2>']",
#       "[1:18-19][BG, '&1']",
#       "[1:21-21][REDIRECT_OUT, '>']",
#       "[1:22-30][WORD, '/dev/null']",
#       "[1:31-31][SEMI, ';']",
#       "[1:32-34][WORD, 'wow']",
#       "[1:35-36][AND, '&&']",
#       "[1:37-39][WORD, 'wow']",
#       "[1:40-41][OR, '||']",
#       "[1:42-42][WORD, 'o']",
#       "[1:43-43][REDIRECT_OUT, '>']",
#       "[1:44-46][WORD, 'out']",
#       "[1:47-48][AND, '&&']",
#       "[1:49-53][WORD, 'goose']",
#       "[1:54-55][PIPE_AND, '|&']",
#       "[1:56-59][WORD, 'duck']",
#       "[1:60-60][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:LIST,
#          s(:PIPELINE,
#            s(:COMMAND,
#              s(:WORD, "ls")),
#            s(:COMMAND,
#              s(:WORD, "wow"),
#              s(:REDIRECTIONS,
#                s(:REDIRECT, 3, "doggo"),
#                s(:DUP, 2, 1),
#                s(:REDIRECT, 1, "/dev/null")))),
#          s(:AND,
#            s(:COMMAND,
#              s(:WORD, "wow")),
#            s(:OR,
#              s(:COMMAND,
#                s(:WORD, "wow")),
#              s(:AND,
#                s(:COMMAND,
#                  s(:WORD, "o"),
#                  s(:REDIRECTIONS,
#                    s(:REDIRECT, 1, "out"))),
#                s(:PIPELINE,
#                  s(:COMMAND,
#                    s(:WORD, "goose"),
#                    s(:REDIRECTIONS,
#                      s(:DUP, 2, 1))),
#                  s(:COMMAND,
#                    s(:WORD, "duck"))))))))

#  ? |
#    ls
#    wow newlines
#    yay
#  :
#    :valid: true
#    :tokens: |
#      ["[1:1-2][WORD, 'ls']",
#       "[2:1-3][WORD, 'wow']",
#       "[2:5-12][WORD, 'newlines']",
#       "[3:1-3][WORD, 'yay']",
#       "[4:1-1][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:COMMAND,
#          s(:WORD, "ls")),
#        s(:COMMAND,
#          s(:WORD, "wow"),
#          s(:WORD, "newlines")),
#        s(:COMMAND,
#          s(:WORD, "yay")))

#  # interpolation

#  "a#{#{:b}#{:c}}d":
#    :valid: true
#    :tokens: |
#      ["[1:1-1][WORD, 'a']",
#       "[1:4-13][INTERPOLATION, '#{:b}#{:c}']",
#       "[1:15-15][WORD, 'd']",
#       "[1:16-16][EOF, '']"]
#    :ast: |

#  "echo #{:a} #{:b}":
#    :valid: true
#    :tokens: |
#      ["[1:1-4][WORD, 'echo']",
#       "[1:8-9][INTERPOLATION, ':a']",
#       "[1:14-15][INTERPOLATION, ':b']",
#       "[1:17-17][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:COMMAND,
#          s(:WORD, "echo"),
#          s(:INTERPOLATION, ":a"),
#          s(:INTERPOLATION, ":b")))

#  # TODO:
#  #   s(:WORD,
#  #     s(:LITERAL, "a")) for all the WORDs
#  "echo a#{:b}c#{:d}e a#{:b} #{:c}d #{1}#{2}":
#    :valid: true
#    :tokens: |
#      ["[1:1-4][WORD, 'echo']",
#       "[1:6-6][WORD, 'a']",
#       "[1:9-10][INTERPOLATION, ':b']",
#       "[1:12-12][WORD, 'c']",
#       "[1:15-16][INTERPOLATION, ':d']",
#       "[1:18-18][WORD, 'e']",
#       "[1:20-20][WORD, 'a']",
#       "[1:23-24][INTERPOLATION, ':b']",
#       "[1:29-30][INTERPOLATION, ':c']",
#       "[1:32-32][WORD, 'd']",
#       "[1:36-36][INTERPOLATION, '1']",
#       "[1:40-40][INTERPOLATION, '2']",
#       "[1:42-42][EOF, '']"]
#    :ast: |
#      s(:EXPR,
#        s(:COMMAND,
#          s(:WORD, "echo"),
#          s(:WORD,
#            s(:LITERAL, "a"),
#            s(:INTERPOLATION, ":b"),
#            s(:LITERAL, "c"),
#            s(:INTERPOLATION, ":d"),
#            s(:LITERAL, "e")),
#          s(:WORD,
#            s(:LITERAL, "a"),
#            s(:INTERPOLATION, ":b")),
#          s(:WORD,
#            s(:INTERPOLATION, ":c"),
#            s(:LITERAL, "d")),
#          s(:WORD,
#            s(:INTERPOLATION, "1"),
#            s(:INTERPOLATION, "2"))))
